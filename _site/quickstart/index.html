<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>GLUSTER - Massive storage for your Cloud.</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/stylesheets/styles.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/javascripts/bootstrap.js" type="text/javascript"></script>
    <script src="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/javascripts/bootstrap-collapse.js" type="text/javascript"></script>
    <script src="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/javascripts/jquery.backstretch.min.js" type="text/javascript"></script>
  </head>
  <body id=""></body>
</html>
<div id="wrap">
  <div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/index.html" id="homenav">Gluster</a>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li>
              <a href="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/blog/index.html" id="blognav">Blog</a>
            </li>
            <li>
              <a href="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/documentation/index.html" id="documentationnav">Documentation</a>
            </li>
            <li>
              <a href="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/community/index.html" id="communitynav">Community</a>
            </li>
            <li>
              <a href="http://forge.gluster.org" id="forgenav">Forge</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="container" id="main">
    <div class="sect1">
    <h2 id="_quickstart_into_glusterfs">QuickStart into GlusterFS</h2>
    <div class="sectionbody">
    <div class="paragraph">
    <p>This document is intended to give you a step by step guide to setting up Gluster for the first time.  For this tutorial, we will assume you are using Fedora virtual machines (other distributions and methods can be found in the new user guide, below.  We also do not explain the steps in detail here, this guide is just to help you get it up and running as soon as possible.  After you deploy Gluster by following these steps, we recommend that you read the Gluster Admin Guide TODO:link! to learn how to administer Gluster and how to select a volume type that fits your needs.  Read the Gluster New User Guide TODO:link! for a more detailed explanation of the steps we took here.  We want you to be successful in as short a time as possible.</p>
    </div>
    <div class="paragraph">
    <p>If you would like a more detailed walk through with instructions for installing using different methods (in local virtual machines, EC2 and baremetal) and different distributions, then have a look at the <em>Getting Started with Gluster</em> TODO:link! guide.</p>
    </div>
    <div class="sect2">
    <h3 id="_really_really_quick_start_guide">Really Really Quick Start Guide</h3>
    <div class="paragraph">
    <p>If you want the bare minumum steps to getting started with Gluster, take a look at the <em>Really Really Quick Start Guide</em> TODO:link!.</p>
    </div>
    
    </div>
    <div class="sect2">
    <h3 id="_step_1_have_at_least_two_nodes">Step 1 –  Have at least two nodes</h3>
    <div class="ulist">
    
    <ul>
    <li>
    <p>A 64 bit OS</p>
    </li>
    <li>
    <p>A working network connection</p>
    </li>
    <li>
    <p>At least two virtual disks, one for the OS installation, and one to be used
    to serve Gluster storage.  This will emulate a real world deployment, where
    you would want seperate disks for Gluster storage than the OS install.</p>
    </li>
    </ul>
    </div>
    
    </div>
    <div class="sect2">
    <h3 id="_step_2_format_and_mount_the_bricks_on_both_nodes">Step 2 - Format and mount the bricks on both nodes</h3>
    <div class="paragraph">
    <p><strong>Note:</strong> This step assumes you have already partitioned the disks.</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   mkfs.xfs -i size=512 /dev/sdb1</code></pre>
    </div>
    </div>
    
    </div>
    <div class="sect2">
    <h3 id="_step_3_add_an_entry_to_etc_fstab">Step 3 - Add an entry to /etc/fstab</h3>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>(on both nodes)&#x000A;   mkdir -p /export/brick1&#x000A;   vi /etc/fstab&#x000A;Add the following:&#x000A;   /dev/sdb1 /export/brick1 xfs defaults 1 2&#x000A;Save the file and exit&#x000A;   mount -a &amp;&amp; mount</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>You should now see the Gluster export directory mounted on /brick1</p>
    </div>
    <div class="paragraph">
    <p>Now create a subdir in the mountpoint.</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>mkdir /export/brick1/sdb1</code></pre>
    </div>
    </div>
    
    </div>
    <div class="sect2">
    <h3 id="_step_4_installing_gluster_on_both_servers">Step 4 – Installing Gluster on both servers</h3>
    <div class="paragraph">
    <p>Install the yum repo</p>
    </div>
    <div class="paragraph">
    <p>CentOS/RHEL:</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   wget -P /etc/yum.repos.d http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/glusterfs-epel.repo</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>Fedora:</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   wget -P /etc/yum.repos.d http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/glusterfs-fedora.repo</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>Then install the software</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   yum install glusterfs{-fuse,-server}</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>Start the Gluster service:</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   service glusterd start&#x000A;   service glusterd status&#x000A;   glusterd.service - LSB: glusterfs server&#x000A;    	  Loaded: loaded (/etc/rc.d/init.d/glusterd)&#x000A;   	  Active: active (running) since Mon, 13 Aug 2012 13:02:11 -0700; 2s ago&#x000A;   	 Process: 19254 ExecStart=/etc/rc.d/init.d/glusterd start (code=exited, status=0/SUCCESS)&#x000A;   	  CGroup: name=systemd:/system/glusterd.service&#x000A;   		  ├ 19260 /usr/sbin/glusterd -p /run/glusterd.pid&#x000A;   		  ├ 19304 /usr/sbin/glusterfsd --xlator-option georep-server.listen-port=24009 -s localhost...&#x000A;   		  └ 19309 /usr/sbin/glusterfs -f /var/lib/glusterd/nfs/nfs-server.vol -p /var/lib/glusterd/...</code></pre>
    </div>
    </div>
    
    </div>
    <div class="sect2">
    <h3 id="_step_5_configure_the_trusted_pool">Step 5 – Configure the trusted pool</h3>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   gluster peer probe &lt;ip or hostname of other node&gt;</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p><strong>Note:</strong> When using hostnames, the first server needs to be probed from one other server to set it&#8217;s hostname.</p>
    </div>
    
    </div>
    <div class="sect2">
    <h3 id="_step_6_set_up_a_gluster_volume">Step 6 – Set up a Gluster volume</h3>
    <div class="paragraph">
    <p>From a single node:</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   gluster volume create gv0 replica 2 node01.mydomain.net:/export/brick1/sdb1 n   ode02.mydomain.net:/export/brick1/sdb1&#x000A;   gluster volume start gv0</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>Confirm that the volume shows "Started":</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   gluster volume info</code></pre>
    </div>
    </div>
    
    </div>
    <div class="sect2">
    <h3 id="_step_7_testing_the_gluster_volume">Step 7 – Testing the Gluster volume</h3>
    <div class="paragraph">
    <p>For this step, we will use one of the Gluster servers to mount the
    volume.  Typically, you would do this from an external machine, known
    as a "client".  Since using the method here would require additional
    packages be installed on the client machine, we will use the servers
    as a simple place to test first.</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   mount -t glusterfs node01.yourdomain.net:/gv0 /mnt&#x000A;   for i in `seq -w 1 100`; do cp -rp /var/log/messages /mnt/copy-test-$i; done</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>First, check the mount point:</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   ls -lA /mnt | wc -l</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>You should see 100 files returned. Next, check the Gluster mount points on each server:</p>
    </div>
    <div class="listingblock">
    
    <div class="content monospaced">
    <pre class="highlight"><code>   ls -lA /export/brick1</code></pre>
    </div>
    </div>
    <div class="paragraph">
    <p>You should see 100 per server using the method we listed here.  Without replication, in a distribute only volume (not detailed here), you should see about 50.</p>
    </div>
    
    </div>
    
    </div>
    </div>
  </div>
</div>
<div id="footer">
  <div class="container">
    <div class="row">
      <div class="span12 pagination-centered">
        <p><small> &copy; 2013 Red Hat, Inc. All Rights Reserved | <a href="https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/legal/">Legal & Privacy</a> </small></p>
      </div>
    </div>
  </div>
</div>
<script>
  $("body").backstretch("https://forge.gluster.org/gluster-site/gluster-site/blobs/raw/master/_site/images/cloud_bg.jpeg");
</script>
